-- BP 7.1.6 content: InstanceStateMachine syschar: 3 persistence-version: 7.1.6

INSERT INTO SM_ISM
	VALUES ("b0b7ecdd-e828-4b1c-acd5-5927d3984c3a",
	"b31686d9-24da-476e-ba58-aee12ba33eff");
INSERT INTO SM_SM
	VALUES ("b0b7ecdd-e828-4b1c-acd5-5927d3984c3a",
	'',
	0);
INSERT INTO SM_MOORE
	VALUES ("b0b7ecdd-e828-4b1c-acd5-5927d3984c3a");
INSERT INTO SM_EVTDI
	VALUES ("ab4b65de-f9bc-4e07-8593-0d3242aba1e7",
	"b0b7ecdd-e828-4b1c-acd5-5927d3984c3a",
	'Test',
	'',
	"ba5eda7a-def5-0000-0000-000000000002",
	'',
	"6899f822-d974-4308-a00d-c78a60710399",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO SM_EVTDI
	VALUES ("ad00bb7a-7bb7-466a-b7f2-ea6aa22a8bc2",
	"b0b7ecdd-e828-4b1c-acd5-5927d3984c3a",
	'Test_Number',
	'',
	"ba5eda7a-def5-0000-0000-000000000002",
	'',
	"6899f822-d974-4308-a00d-c78a60710399",
	"ab4b65de-f9bc-4e07-8593-0d3242aba1e7");
INSERT INTO SM_LEVT
	VALUES ("6899f822-d974-4308-a00d-c78a60710399",
	"b0b7ecdd-e828-4b1c-acd5-5927d3984c3a",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO SM_SEVT
	VALUES ("6899f822-d974-4308-a00d-c78a60710399",
	"b0b7ecdd-e828-4b1c-acd5-5927d3984c3a",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO SM_EVT
	VALUES ("6899f822-d974-4308-a00d-c78a60710399",
	"b0b7ecdd-e828-4b1c-acd5-5927d3984c3a",
	"00000000-0000-0000-0000-000000000000",
	1,
	'StartA',
	0,
	'',
	'objTERMINAL1',
	'');
INSERT INTO SM_STATE
	VALUES ("3f40cf80-6601-4cdc-a7aa-81a39e8a88f5",
	"b0b7ecdd-e828-4b1c-acd5-5927d3984c3a",
	"00000000-0000-0000-0000-000000000000",
	'Idle',
	1,
	0);
INSERT INTO SM_SEME
	VALUES ("3f40cf80-6601-4cdc-a7aa-81a39e8a88f5",
	"6899f822-d974-4308-a00d-c78a60710399",
	"b0b7ecdd-e828-4b1c-acd5-5927d3984c3a",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO SM_STATE
	VALUES ("f9d95fb0-a0c3-478d-9b1d-67bef0db6963",
	"b0b7ecdd-e828-4b1c-acd5-5927d3984c3a",
	"00000000-0000-0000-0000-000000000000",
	'Terminal_State',
	2,
	1);
INSERT INTO SM_CH
	VALUES ("f9d95fb0-a0c3-478d-9b1d-67bef0db6963",
	"6899f822-d974-4308-a00d-c78a60710399",
	"b0b7ecdd-e828-4b1c-acd5-5927d3984c3a",
	"00000000-0000-0000-0000-000000000000",
	'');
INSERT INTO SM_SEME
	VALUES ("f9d95fb0-a0c3-478d-9b1d-67bef0db6963",
	"6899f822-d974-4308-a00d-c78a60710399",
	"b0b7ecdd-e828-4b1c-acd5-5927d3984c3a",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO SM_NSTXN
	VALUES ("9c72c494-5a4a-4387-ae3b-ca934a69bd30",
	"b0b7ecdd-e828-4b1c-acd5-5927d3984c3a",
	"3f40cf80-6601-4cdc-a7aa-81a39e8a88f5",
	"6899f822-d974-4308-a00d-c78a60710399",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO SM_TXN
	VALUES ("9c72c494-5a4a-4387-ae3b-ca934a69bd30",
	"b0b7ecdd-e828-4b1c-acd5-5927d3984c3a",
	"f9d95fb0-a0c3-478d-9b1d-67bef0db6963",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO SM_MOAH
	VALUES ("437d6323-46fd-4b02-9e7b-caec4cb176ee",
	"b0b7ecdd-e828-4b1c-acd5-5927d3984c3a",
	"3f40cf80-6601-4cdc-a7aa-81a39e8a88f5");
INSERT INTO SM_AH
	VALUES ("437d6323-46fd-4b02-9e7b-caec4cb176ee",
	"b0b7ecdd-e828-4b1c-acd5-5927d3984c3a");
INSERT INTO SM_ACT
	VALUES ("437d6323-46fd-4b02-9e7b-caec4cb176ee",
	"b0b7ecdd-e828-4b1c-acd5-5927d3984c3a",
	3,
	'#None',
	'',
	2);
INSERT INTO SM_MOAH
	VALUES ("8543d269-9044-492c-a40e-5237312ce920",
	"b0b7ecdd-e828-4b1c-acd5-5927d3984c3a",
	"f9d95fb0-a0c3-478d-9b1d-67bef0db6963");
INSERT INTO SM_AH
	VALUES ("8543d269-9044-492c-a40e-5237312ce920",
	"b0b7ecdd-e828-4b1c-acd5-5927d3984c3a");
INSERT INTO SM_ACT
	VALUES ("8543d269-9044-492c-a40e-5237312ce920",
	"b0b7ecdd-e828-4b1c-acd5-5927d3984c3a",
	3,
	'#-----------------------------------------------------------
# Terminal state
#-----------------------------------------------------------

[] = RPT1:Start_Test[Test_Number, "1241-0000-01-0206", "Events", "Terminal", "Terminal state test"]

this.ResultA  = 10

{tob} = find-all Terminal_Object

notob = countof{tob}

# Due to the vaguaries of the queueing system and the fact that
# the scenario runs to completion before events are de-queued, 
# for test 1 there will be two instances of Terminal_Object 
# loitering in the system waiting to be jumped on. 
# This state will delete one of them, leaving one to fend for itself.

# Then in test two, the final instance will exit stage left.

if Test = 1 and notob = 2 then

   # Report a success, there really isn''t anything else it could be.
   [] = RPT2:Test_Passed["Terminal", Test_Number, this.ResultA]
else

   if Test = 2 and notob = 1 then
      [] = RPT2:Test_Passed["Terminal", Test_Number, this.ResultA]
   else
      # There is more than one of this object. There shouldn''t be.
      [] = RPT3:Test_Failed["Terminal", Test_Number, notob]
   endif

endif
   
# Delete the instance.
delete this',
	' This state shall delete it''s own instance, but only 
 after reporting itself as available for deletion.
',
	2);
INSERT INTO SM_TAH
	VALUES ("0bcfd80b-fd80-4b21-9108-ef06345054eb",
	"b0b7ecdd-e828-4b1c-acd5-5927d3984c3a",
	"9c72c494-5a4a-4387-ae3b-ca934a69bd30");
INSERT INTO SM_AH
	VALUES ("0bcfd80b-fd80-4b21-9108-ef06345054eb",
	"b0b7ecdd-e828-4b1c-acd5-5927d3984c3a");
INSERT INTO SM_ACT
	VALUES ("0bcfd80b-fd80-4b21-9108-ef06345054eb",
	"b0b7ecdd-e828-4b1c-acd5-5927d3984c3a",
	3,
	'',
	'',
	6);
INSERT INTO GD_MD
	VALUES ("5189468d-f490-4bec-98ac-941087cd340a",
	8,
	"b0b7ecdd-e828-4b1c-acd5-5927d3984c3a",
	40,
	0,
	0,
	1,
	1,
	1,
	12,
	1,
	0,
	0,
	200,
	150,
	0,
	'',
	'Events::Events::Events::Events::Terminal_Object::Instance State Machine');
INSERT INTO GD_GE
	VALUES ("f96a0e4d-a0e9-4146-9ea4-37cdf8152bd3",
	"5189468d-f490-4bec-98ac-941087cd340a",
	"3f40cf80-6601-4cdc-a7aa-81a39e8a88f5",
	41,
	0,
	'Events::Events::Events::Events::Terminal_Object::Instance State Machine::Idle');
INSERT INTO GD_SHP
	VALUES ("f96a0e4d-a0e9-4146-9ea4-37cdf8152bd3");
INSERT INTO GD_NCS
	VALUES ("f96a0e4d-a0e9-4146-9ea4-37cdf8152bd3");
INSERT INTO DIM_ND
	VALUES (200.000000,
	150.000000,
	"f96a0e4d-a0e9-4146-9ea4-37cdf8152bd3");
INSERT INTO DIM_GE
	VALUES (0.000000,
	0.000000,
	"f96a0e4d-a0e9-4146-9ea4-37cdf8152bd3",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO DIM_ELE
	VALUES ("f96a0e4d-a0e9-4146-9ea4-37cdf8152bd3",
	0,
	"00000000-0000-0000-0000-000000000000");
INSERT INTO DIM_CON
	VALUES ("dee3a0d4-4f4c-4aa4-aeae-31c63b137aa1",
	200.000000,
	0.000000,
	"f96a0e4d-a0e9-4146-9ea4-37cdf8152bd3");
INSERT INTO GD_GE
	VALUES ("f3067a5e-1f29-4e15-876f-d559b73dc2c2",
	"5189468d-f490-4bec-98ac-941087cd340a",
	"f9d95fb0-a0c3-478d-9b1d-67bef0db6963",
	41,
	0,
	'Events::Events::Events::Events::Terminal_Object::Instance State Machine::Terminal_State');
INSERT INTO GD_SHP
	VALUES ("f3067a5e-1f29-4e15-876f-d559b73dc2c2");
INSERT INTO GD_NCS
	VALUES ("f3067a5e-1f29-4e15-876f-d559b73dc2c2");
INSERT INTO DIM_ND
	VALUES (200.000000,
	150.000000,
	"f3067a5e-1f29-4e15-876f-d559b73dc2c2");
INSERT INTO DIM_GE
	VALUES (220.000000,
	0.000000,
	"f3067a5e-1f29-4e15-876f-d559b73dc2c2",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO DIM_ELE
	VALUES ("f3067a5e-1f29-4e15-876f-d559b73dc2c2",
	0,
	"00000000-0000-0000-0000-000000000000");
INSERT INTO DIM_CON
	VALUES ("2660e1e8-a41a-4bec-90ec-9e541fde085d",
	220.000000,
	75.000000,
	"f3067a5e-1f29-4e15-876f-d559b73dc2c2");
INSERT INTO GD_GE
	VALUES ("ad514d67-ca59-4303-bc63-a028b0b79794",
	"5189468d-f490-4bec-98ac-941087cd340a",
	"9c72c494-5a4a-4387-ae3b-ca934a69bd30",
	42,
	0,
	'Events::Events::Events::Events::Terminal_Object::Instance State Machine::Idle::objTERMINAL1: StartA');
INSERT INTO GD_CON
	VALUES ("ad514d67-ca59-4303-bc63-a028b0b79794",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO GD_CTXT
	VALUES ("14aeac1a-651f-4d36-beb5-6ea2b5d2c056",
	"ad514d67-ca59-4303-bc63-a028b0b79794",
	0,
	0.000000,
	0.000000);
INSERT INTO DIM_ND
	VALUES (0.000000,
	0.000000,
	"14aeac1a-651f-4d36-beb5-6ea2b5d2c056");
INSERT INTO DIM_GE
	VALUES (0.000000,
	0.000000,
	"14aeac1a-651f-4d36-beb5-6ea2b5d2c056",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO DIM_ELE
	VALUES ("14aeac1a-651f-4d36-beb5-6ea2b5d2c056",
	0,
	"00000000-0000-0000-0000-000000000000");
INSERT INTO GD_CTXT
	VALUES ("41dd2e9e-37b8-4ff0-a731-6f26e9d11de2",
	"ad514d67-ca59-4303-bc63-a028b0b79794",
	2,
	0.000000,
	0.000000);
INSERT INTO DIM_ND
	VALUES (0.000000,
	0.000000,
	"41dd2e9e-37b8-4ff0-a731-6f26e9d11de2");
INSERT INTO DIM_GE
	VALUES (0.000000,
	0.000000,
	"41dd2e9e-37b8-4ff0-a731-6f26e9d11de2",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO DIM_ELE
	VALUES ("41dd2e9e-37b8-4ff0-a731-6f26e9d11de2",
	0,
	"00000000-0000-0000-0000-000000000000");
INSERT INTO GD_CTXT
	VALUES ("a933c0d6-a22b-4a94-b106-78242129d544",
	"ad514d67-ca59-4303-bc63-a028b0b79794",
	1,
	0.000000,
	0.000000);
INSERT INTO DIM_ND
	VALUES (0.000000,
	0.000000,
	"a933c0d6-a22b-4a94-b106-78242129d544");
INSERT INTO DIM_GE
	VALUES (0.000000,
	0.000000,
	"a933c0d6-a22b-4a94-b106-78242129d544",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO DIM_ELE
	VALUES ("a933c0d6-a22b-4a94-b106-78242129d544",
	0,
	"00000000-0000-0000-0000-000000000000");
INSERT INTO GD_LS
	VALUES ("2489a327-31b8-4bad-8a8b-00694eba4861",
	"ad514d67-ca59-4303-bc63-a028b0b79794",
	"00000000-0000-0000-0000-000000000000",
	"0b419f8a-cf97-4784-91a5-257de3558f41",
	"2d60a307-0968-4496-b521-03d1333663f6");
INSERT INTO DIM_WAY
	VALUES ("0b419f8a-cf97-4784-91a5-257de3558f41",
	200.000000,
	0.000000,
	"ad514d67-ca59-4303-bc63-a028b0b79794",
	"00000000-0000-0000-0000-000000000000",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO DIM_WAY
	VALUES ("2d60a307-0968-4496-b521-03d1333663f6",
	220.000000,
	75.000000,
	"ad514d67-ca59-4303-bc63-a028b0b79794",
	"00000000-0000-0000-0000-000000000000",
	"0b419f8a-cf97-4784-91a5-257de3558f41");
INSERT INTO DIM_GE
	VALUES (0.000000,
	0.000000,
	"ad514d67-ca59-4303-bc63-a028b0b79794",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO DIM_ELE
	VALUES ("ad514d67-ca59-4303-bc63-a028b0b79794",
	0,
	"00000000-0000-0000-0000-000000000000");
INSERT INTO DIM_ED
	VALUES ("dee3a0d4-4f4c-4aa4-aeae-31c63b137aa1",
	"2660e1e8-a41a-4bec-90ec-9e541fde085d",
	"ad514d67-ca59-4303-bc63-a028b0b79794");
INSERT INTO DIM_DIA
	VALUES ("5189468d-f490-4bec-98ac-941087cd340a",
	'',
	1.000000,
	0.000000,
	0.000000,
	"00000000-0000-0000-0000-000000000000");
INSERT INTO O_OBJ_PROXY
	VALUES ("b31686d9-24da-476e-ba58-aee12ba33eff",
	'Terminal_Object',
	27,
	'objTERMINAL',
	'',
	"00000000-0000-0000-0000-000000000000",
	'../Terminal_Object.xtuml');
